{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessories | FURFEAST CO.</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#f97316',
                            foreground: '#ffffff',
                            light: '#fff7ed',
                            dark: '#ea580c',
                        },
                        secondary: {
                            DEFAULT: '#10b981',
                            foreground: '#ffffff',
                        },
                        accent: {
                            DEFAULT: '#f43f5e',
                        },
                        background: '#fefce8',
                        foreground: '#1e293b',
                        card: '#ffffff',
                        border: '#e2e8f0',
                        muted: {
                            DEFAULT: '#f1f5f9',
                            foreground: '#64748b',
                        }
                    },
                    fontFamily: {
                        heading: ['Nunito', 'sans-serif'],
                        body: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'slide-up': 'slide-up 0.5s ease-out forwards',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 3s ease-in-out infinite',
                    },
                    keyframes: {
                        'slide-up': {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        'float': {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-background text-foreground font-body antialiased">

    <div id="shopify-section-header" data-cart-count="{{ cart_count }}" data-wishlist-count="{{ wishlist_count }}">
    </div>

    <main>
        <!-- Page Header -->
        <section class="bg-gradient-to-r from-teal-50 to-emerald-100 py-10 md:py-16">
            <div class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-12 text-center md:text-left">
                <h1 class="text-3xl md:text-4xl font-heading font-extrabold text-slate-900 mb-2">
                    Premium Accessories
                </h1>
                <p class="text-slate-600 max-w-2xl">
                    Everything your pet needs to thrive. Explore our collection of durable leashes, cozy beds, and
                    interactive toys designed for every size and style.
                </p>
            </div>
        </section>

        <!-- Shop Content -->
        <section class="py-12 bg-white">
            <div class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-12">
                <div class="flex flex-col lg:flex-row gap-8 lg:gap-12">

                    <!-- Filter Sidebar -->
                    <aside class="w-full lg:w-72 shrink-0 space-y-8">
                        <div class="lg:sticky lg:top-28">
                            <div class="flex items-center justify-between lg:block mb-4">
                                <h3 class="font-bold text-slate-900 flex items-center gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" />
                                    </svg>
                                    Filters
                                </h3>
                                <button id="filter-toggle"
                                    class="lg:hidden text-sm font-bold text-primary flex items-center gap-1">
                                    <span>Expand Filters</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="m6 9 6 6 6-6" />
                                    </svg>
                                </button>
                            </div>

                            <div id="filter-content" class="hidden lg:block space-y-8 animate-fade-in">
                                <div>
                                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">
                                        Categories</h4>
                                    <div class="space-y-3">
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" checked
                                                class="w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary">
                                            <span
                                                class="text-sm text-slate-700 group-hover:text-primary transition-colors">All
                                                Accessories</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox"
                                                class="w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary">
                                            <span
                                                class="text-sm text-slate-700 group-hover:text-primary transition-colors">Toys</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox"
                                                class="w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary">
                                            <span
                                                class="text-sm text-slate-700 group-hover:text-primary transition-colors">Beds
                                                & Blankets</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox"
                                                class="w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary">
                                            <span
                                                class="text-sm text-slate-700 group-hover:text-primary transition-colors">Collars
                                                & Leashes</span>
                                        </label>
                                    </div>
                                </div>

                            </div>
                        </div>
                </div>
                </aside>

                <!-- Product Grid Section -->
                <div class="flex-1">
                    <!-- Toolbar -->
                    <div class="flex flex-wrap items-center justify-between mb-8 pb-6 border-b border-slate-100 gap-4">
                        {% if products %}
                        <div class="text-slate-500 text-sm">Showing <span class="font-bold text-slate-900">{{ products.start_index }} - {{ products.end_index }}</span> of <span
                                class="font-bold text-slate-900">{{ products.paginator.count }}</span> products</div>
                        {% else %}
                        <div class="text-slate-500 text-sm"></div>
                        {% endif %}
                        <div class="flex items-center gap-4 relative group">
                            <span class="text-sm text-slate-500">Sort by:</span>
                            <button
                                class="flex items-center gap-1 text-sm font-semibold text-slate-900 bg-transparent focus:outline-none cursor-pointer">
                                {% if sort_by == 'newest' %}
                                Newest
                                {% elif sort_by == 'price_asc' %}
                                Price: Low to High
                                {% elif sort_by == 'price_desc' %}
                                Price: High to Low
                                {% elif sort_by == 'rating' %}
                                Rating
                                {% else %}
                                Newest
                                {% endif %}
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="ml-1">
                                    <path d="m6 9 6 6 6-6" />
                                </svg>
                            </button>
                            <div
                                class="dropdown-content absolute z-10 right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-slate-100 py-2 hidden group-hover:block transition-all duration-300">
                                <a href="?sort=newest{% if current_category %}&category={{ current_category.slug }}{% endif %}"
                                    class="block px-4 py-2 text-sm text-slate-600 hover:bg-orange-50 hover:text-orange-500 font-medium transition-colors
                                   {% if sort_by == 'newest' %}bg-orange-50 text-orange-500{% endif %}">
                                    Newest
                                </a>
                                <a href="?sort=price_asc{% if current_category %}&category={{ current_category.slug }}{% endif %}"
                                    class="block px-4 py-2 text-sm text-slate-600 hover:bg-orange-50 hover:text-orange-500 font-medium transition-colors
                                   {% if sort_by == 'price_asc' %}bg-orange-50 text-orange-500{% endif %}">
                                    Price: Low to High
                                </a>
                                <a href="?sort=price_desc{% if current_category %}&category={{ current_category.slug }}{% endif %}"
                                    class="block px-4 py-2 text-sm text-slate-600 hover:bg-orange-50 hover:text-orange-500 font-medium transition-colors
                                   {% if sort_by == 'price_desc' %}bg-orange-50 text-orange-500{% endif %}">
                                    Price: High to Low
                                </a>
                                <a href="?sort=rating{% if current_category %}&category={{ current_category.slug }}{% endif %}"
                                    class="block px-4 py-2 text-sm text-slate-600 hover:bg-orange-50 hover:text-orange-500 font-medium transition-colors
                                   {% if sort_by == 'rating' %}bg-orange-50 text-orange-500{% endif %}">
                                    Rating
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Grid -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8">
                        {% for product in products %}
                        <!-- Product Item -->
                        <div class="card-product group">
                            <div class="relative aspect-square overflow-hidden bg-slate-100">
                                {% if product.image %}
                                <img src="{{ product.image.url }}" alt="{{ product.name }}"
                                    class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                                {% else %}
                                <div class="w-full h-full flex items-center justify-center text-slate-400">No Image
                                </div>
                                {% endif %}

                                <div class="absolute top-3 left-3 flex flex-col gap-2">
                                    {% if product.is_out_of_stock or product.stock == 0 %}
                                    <span
                                        class="bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-full uppercase">Out of Stock</span>
                                    {% elif product.is_bestseller %}
                                    <span
                                        class="bg-primary text-white text-[10px] font-bold px-2 py-1 rounded-full uppercase">Bestseller</span>
                                    {% endif %}
                                </div>
                                <button onclick="addToWishlist({{ product.id }})"
                                    class="absolute top-3 right-3 w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-slate-700 hover:text-red-500 hover:bg-white transition-all shadow-sm opacity-0 group-hover:opacity-100">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path
                                            d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />
                                    </svg>
                                </button>
                                <div
                                    class="absolute bottom-3 left-3 right-3 flex gap-2 translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300">
                                    {% if product.is_out_of_stock or product.stock == 0 %}
                                    <button disabled
                                        class="flex-1 bg-gray-400 text-white py-2 rounded-lg text-xs font-bold cursor-not-allowed flex items-center justify-center gap-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="12" cy="12" r="10" />
                                            <line x1="15" y1="9" x2="9" y2="15" />
                                            <line x1="9" y1="9" x2="15" y2="15" />
                                        </svg>
                                        Out of Stock
                                    </button>
                                    {% else %}
                                    <button onclick="addToCart({{ product.id }})"
                                        class="flex-1 bg-slate-900 text-white py-2 rounded-lg text-xs font-bold hover:bg-primary transition-colors flex items-center justify-center gap-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="8" cy="21" r="1" />
                                            <circle cx="19" cy="21" r="1" />
                                            <path
                                                d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12" />
                                        </svg>
                                        Add
                                    </button>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="p-4">
                                <div class="flex items-center gap-1 mb-2">
                                    <div class="flex text-primary">
                                        <span class="text-xs">★</span><span class="text-xs">★</span><span
                                            class="text-xs">★</span><span class="text-xs">★</span><span
                                            class="text-xs text-slate-300">★</span>
                                    </div>
                                    <span class="text-[10px] text-slate-400">({{ product.rating }})</span>
                                </div>
                                <h3
                                    class="font-bold text-slate-800 text-sm mb-1 truncate group-hover:text-primary transition-colors">
                                    {{ product.name }}</h3>
                                <p class="text-[11px] text-slate-500 line-clamp-1 mb-3">{{ product.description }}</p>
                                <div class="flex items-center gap-2">
                                    <span class="text-base font-extrabold text-primary">${{ product.price }}</span>
                                </div>
                            </div>
                        </div>
                        {% empty %}
                        <div class="col-span-3 text-center py-16">
                            <div
                                class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-400">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10" />
                                    <line x1="12" y1="8" x2="12" y2="12" />
                                    <line x1="12" y1="16" x2="12.01" y2="16" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold text-slate-900 mb-2">Sorry, no products are available right
                                now.</h3>
                            <p class="text-slate-500">Please check back later or browse other categories.</p>
                        </div>
                        {% endfor %}
                    </div>

                    <!-- Pagination -->
                    <div class="mt-12 flex justify-center items-center gap-2">
                        {% if products.has_previous %}
                        <a href="?page={{ products.previous_page_number }}&sort={{ sort_by }}"
                            class="w-10 h-10 border border-slate-200 rounded-lg flex items-center justify-center font-semibold text-slate-600 hover:border-primary hover:text-primary transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="m15 18-6-6 6-6" />
                            </svg>
                        </a>
                        {% endif %}

                        <span
                            class="w-10 h-10 bg-primary text-white rounded-lg flex items-center justify-center font-bold">
                            {{ products.number }}
                        </span>

                        {% if products.has_next %}
                        <a href="?page={{ products.next_page_number }}&sort={{ sort_by }}"
                            class="w-10 h-10 border border-slate-200 rounded-lg flex items-center justify-center font-semibold text-slate-600 hover:border-primary hover:text-primary transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="m9 18 6-6-6-6" />
                            </svg>
                        </a>
                        {% endif %}
                    </div>

                </div>
            </div>
            </div>
        </section>
    </main>

    <div id="shopify-section-footer"></div>

    <script src="{% static 'js/components.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script>
        // Category Page Specific Logic
        document.addEventListener('DOMContentLoaded', () => {
            const filterToggle = document.getElementById('filter-toggle');
            const filterContent = document.getElementById('filter-content');

            if (filterToggle && filterContent) {
                filterToggle.addEventListener('click', () => {
                    const isHidden = filterContent.classList.contains('hidden');
                    filterContent.classList.toggle('hidden');
                    filterToggle.querySelector('span').textContent = isHidden ? 'Hide Filters' : 'Expand Filters';
                    filterToggle.querySelector('svg').style.transform = isHidden ? 'rotate(180deg)' : '';
                });
            }
        });
    </script>
</body>

</html>