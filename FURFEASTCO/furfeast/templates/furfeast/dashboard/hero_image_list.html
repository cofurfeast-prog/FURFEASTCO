{% extends 'furfeast/dashboard/base.html' %}

{% block content %}
<div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
    <div>
        <h2 class="text-2xl font-bold text-slate-900">Hero Images</h2>
        <p class="text-slate-500">Manage homepage hero slider images (1920x800px required)</p>
    </div>
    <a href="{% url 'dashboard_hero_image_create' %}"
        class="px-4 py-2 bg-orange-500 text-white rounded-xl font-semibold hover:bg-orange-600 transition-colors">
        Add Hero Image
    </a>
</div>

<div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
    {% if images %}
    {% for image in images %}
    <div class="p-4 md:p-6 border-b border-slate-100 last:border-b-0">
        <div class="flex flex-col gap-4">
            <div class="w-full h-32 sm:h-40 bg-slate-100 rounded-lg overflow-hidden">
                <img src="{{ image.image.url }}" alt="{{ image.title }}" class="w-full h-full object-cover">
            </div>
            <div class="flex-1">
                <div class="flex flex-col sm:flex-row sm:items-center gap-2 mb-2">
                    <h3 class="text-lg sm:text-xl font-bold text-slate-900">{{ image.title }}</h3>
                    {% if not image.is_active %}
                    <span class="px-2 py-1 bg-red-100 text-red-600 text-xs rounded-full w-fit">Inactive</span>
                    {% endif %}
                </div>
                <p class="text-slate-600 mb-2 text-sm sm:text-base">{{ image.headline }}</p>
                <p class="text-xs sm:text-sm text-slate-500 mb-4">{{ image.subheadline }}</p>
                <div class="flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-slate-500">
                    <span>Order: {{ image.order }}</span>
                    <span>Align: {{ image.get_align_display }}</span>
                    <span>CTA: {{ image.cta_text }}</span>
                </div>
            </div>
            <div class="flex flex-col sm:flex-row gap-2">
                <a href="{% url 'dashboard_hero_image_edit' image.id %}"
                    class="px-4 py-2 bg-blue-500 text-white rounded-lg text-center hover:bg-blue-600 transition-colors text-sm">
                    Edit
                </a>
                <button onclick="showDeleteConfirmation('{{ image.id }}', '{{ image.title }}')"
                    class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm">
                    Delete
                </button>
            </div>
        </div>
    </div>
    {% endfor %}
    {% else %}
    <div class="p-6 sm:p-8 text-center">
        <div class="text-slate-400 mb-4 text-4xl sm:text-6xl">üñºÔ∏è</div>
        <p class="text-slate-500 mb-4">No hero images found.</p>
        <a href="{% url 'dashboard_hero_image_create' %}"
            class="px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors">
            Add First Hero Image
        </a>
    </div>
    {% endif %}
</div>

<!-- Delete Confirmation Modal -->
<div id="deleteModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl p-6 sm:p-8 max-w-md w-full mx-4 text-center">
        <div class="text-4xl sm:text-6xl mb-4">üêæ</div>
        <h3 class="text-lg sm:text-xl font-bold text-slate-900 mb-2">Delete Hero Image?</h3>
        <p class="text-slate-600 mb-6 text-sm sm:text-base">Are you sure you want to delete "<span id="deleteItemName"></span>"? This action cannot be undone.</p>
        <div class="flex flex-col sm:flex-row gap-3 justify-center">
            <button onclick="hideDeleteConfirmation()" class="px-6 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 transition-colors">
                Cancel
            </button>
            <a id="confirmDeleteBtn" href="#" class="px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors">
                Delete
            </a>
        </div>
    </div>
</div>

<script>
function showDeleteConfirmation(imageId, imageName) {
    document.getElementById('deleteItemName').textContent = imageName;
    document.getElementById('confirmDeleteBtn').href = `/dashboard/hero-images/${imageId}/delete/`;
    document.getElementById('deleteModal').classList.remove('hidden');
    document.getElementById('deleteModal').classList.add('flex');
}

function hideDeleteConfirmation() {
    document.getElementById('deleteModal').classList.add('hidden');
    document.getElementById('deleteModal').classList.remove('flex');
}
</script>
{% endblock %}