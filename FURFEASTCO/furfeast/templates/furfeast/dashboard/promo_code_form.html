{% extends 'furfeast/dashboard/base.html' %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="mb-6 md:mb-8">
        <h2 class="text-xl md:text-2xl font-bold text-slate-900">{% if promo %}Edit Discount Code{% else %}Create Discount Code{% endif %}</h2>
        <p class="text-slate-500 text-sm md:text-base">{% if promo %}Update existing promotional code{% else %}Generate a new promotional code{% endif %}</p>
    </div>

    <form method="POST" class="bg-white p-4 md:p-8 rounded-2xl shadow-sm border border-slate-100 space-y-4 md:space-y-6">
        {% csrf_token %}

        <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">Promo Code</label>
            <input type="text" name="code" placeholder="e.g. FURFEAST20" required value="{{ promo.code|default:'' }}"
                class="w-full px-4 py-2 rounded-xl border border-slate-200 focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors uppercase font-mono">
        </div>

        <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">Discount Amount ($)</label>
            <input type="number" step="0.01" name="discount_amount" required value="{{ promo.discount_amount }}"
                class="w-full px-4 py-2 rounded-xl border border-slate-200 focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors">
        </div>

        <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">Minimum Order for Free Shipping ($)</label>
            <input type="number" step="0.01" name="min_order_amount" required
                value="{{ promo.min_order_amount|default:50.00 }}"
                class="w-full px-4 py-2 rounded-xl border border-slate-200 focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors">
            <p class="text-xs text-slate-400 mt-1">This amount will be shown in the top promo bar.</p>
        </div>

        <div class="grid grid-cols-1 gap-4 md:gap-6">
            <div>
                <label class="block text-sm font-semibold text-slate-700 mb-2">Valid From</label>
                <input type="datetime-local" name="valid_from" required value="{{ promo.valid_from|date:'Y-m-d\TH:i' }}"
                    class="w-full px-3 py-2 text-sm rounded-xl border border-slate-200 focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors">
            </div>
            <div>
                <label class="block text-sm font-semibold text-slate-700 mb-2">Valid To</label>
                <input type="datetime-local" name="valid_to" required value="{{ promo.valid_to|date:'Y-m-d\TH:i' }}"
                    class="w-full px-3 py-2 text-sm rounded-xl border border-slate-200 focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors">
            </div>
        </div>

        {% if promo %}
        <div class="flex items-center gap-3">
            <input type="checkbox" name="active" id="active" {% if promo.active %}checked{% endif %}
                class="w-5 h-5 rounded border-slate-300 text-primary focus:ring-primary">
            <label for="active" class="text-sm font-semibold text-slate-700">Currently Active</label>
        </div>
        {% endif %}

        <div class="flex items-center gap-4 pt-4 border-t border-slate-100 mt-6">
            <button type="submit"
                class="px-6 py-2 bg-orange-500 text-white rounded-xl font-bold hover:bg-orange-600 transition-colors">
                {% if promo %}Update Promo Code{% else %}Create Promo Code{% endif %}
            </button>
            <a href="{% url 'dashboard_promo_code_list' %}"
                class="px-6 py-2 bg-slate-100 text-slate-600 rounded-xl font-bold hover:bg-slate-200 transition-colors">
                Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}