{% extends 'furfeast/dashboard/base.html' %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="mb-6 md:mb-8">
        <h2 class="text-xl md:text-2xl font-bold text-slate-900">{% if sale %}Edit Flash Sale{% else %}Create Flash Sale{% endif %}</h2>
        <p class="text-slate-500 text-sm md:text-base">{% if sale %}Update existing timed discount{% else %}Set up a new timed discount{% endif %}</p>
    </div>

    <form method="POST" class="bg-white p-4 md:p-8 rounded-2xl shadow-sm border border-slate-100 space-y-4 md:space-y-6">
        {% csrf_token %}

        <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">Flash Sale Title (Optional)</label>
            <input type="text" name="title" placeholder="e.g., Weekend Megasale!" value="{{ sale.title|default:'' }}"
                class="w-full px-4 py-2 rounded-xl border border-slate-200 focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors">
        </div>

        <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">Select Category (Optional)</label>
            <select name="category"
                class="w-full px-4 py-2 rounded-xl border border-slate-200 focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors bg-white">
                <option value="">-- All Categories --</option>
                <option value="dog-food" {% if sale.category == 'dog-food' %}selected{% endif %}>Dog Food</option>
                <option value="cat-food" {% if sale.category == 'cat-food' %}selected{% endif %}>Cat Food</option>
                <option value="accessories" {% if sale.category == 'accessories' %}selected{% endif %}>Accessories</option>
            </select>
            <p class="text-xs text-slate-400 mt-1">If no category is selected, the sale applies to all products.</p>
        </div>

        <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">Discount Percentage (%)</label>
            <input type="number" name="discount_percentage" min="1" max="99" required
                value="{{ sale.discount_percentage }}"
                class="w-full px-4 py-2 rounded-xl border border-slate-200 focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors">
        </div>

        <div class="grid grid-cols-1 gap-4 md:gap-6">
            <div>
                <label class="block text-sm font-semibold text-slate-700 mb-2">Start Time</label>
                <input type="datetime-local" name="start_time" required value="{{ sale.start_time|date:'Y-m-d\TH:i' }}"
                    class="w-full px-3 py-2 text-sm rounded-xl border border-slate-200 focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors">
            </div>
            <div>
                <label class="block text-sm font-semibold text-slate-700 mb-2">End Time</label>
                <input type="datetime-local" name="end_time" required value="{{ sale.end_time|date:'Y-m-d\TH:i' }}"
                    class="w-full px-3 py-2 text-sm rounded-xl border border-slate-200 focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors">
            </div>
        </div>

        {% if sale %}
        <div class="flex items-center gap-3">
            <input type="checkbox" name="is_active" id="is_active" {% if sale.is_active %}checked{% endif %}
                class="w-5 h-5 rounded border-slate-300 text-primary focus:ring-primary">
            <label for="is_active" class="text-sm font-semibold text-slate-700">Currently Active</label>
        </div>
        {% endif %}

        <div class="flex items-center gap-4 pt-4 border-t border-slate-100 mt-6">
            <button type="submit"
                class="px-6 py-2 bg-orange-500 text-white rounded-xl font-bold hover:bg-orange-600 transition-colors">
                {% if sale %}Update Flash Sale{% else %}Create Flash Sale{% endif %}
            </button>
            <a href="{% url 'dashboard_flash_sale_list' %}"
                class="px-6 py-2 bg-slate-100 text-slate-600 rounded-xl font-bold hover:bg-slate-200 transition-colors">
                Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}